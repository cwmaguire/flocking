<html>
  <head>
    <script language="javascript">
      var boids = [];

      function go(){
        setInterval(function() {boids = animateBoids(boids, [])}, 1000);
      }

      function animateBoids(boids, newBoids){
        if(boids.length > 0){
          var newBoid = moveBoid(boids[0]);
          animateBoid(boid);
          var newBoids = newBoids.slice(0);
          newBoids.push(newBoid);
          animateBoids(boids.slice(1), newBoids);
        }else{
          return newBoids;
        }
      }

      function moveBoid(boid){
        var newVector = circleEdgesVector(boid);
        var combinedVector = combineVectors(newVector, boid.vector);
        var movedBoid = applyVector(boid, newVector);
        return movedBoid;
      }

      function circleEdgesVector(boid){
        return getRegion(boid).getVelocity();
      }

      function getRegion(w, h, x, y){
        // concentric rings 1, 2, 3

        var mid = {x : w / 2, y : h / 2};
        var innerSquare = calcSquarePoints(w, h, 0.30);
        var middleSquare = calcSquarePoints(2, h, 0.70);
        //var columns = splitColumns(w, h, 0.15, 0.20, 0.30, 0.20, 0.15);
        //var rows = splitRows(w, h, 0.15, 0.20, 0.30, 0.20, 0.15);
        var columns = w, h, 0.15, 0.20, 0.30, 0.20, 0.15;
        var rows = w, h, 0.15, 0.20, 0.30, 0.20, 0.15;
        var regionCoords = regionCoords(w, h, x, y, columns, rows);
        var regionsFuns = {[1, 1] : outTopLeft,
                           [1, 2] : outMidLeft,
                           [1, 3] : outMidLeft,
                           [1, 4] : outMidLeft,
                           [1, 5] : outBottomLeft,
                           [2, 1] : outTopMiddle,
                           [2, 2] : midTopLeft,
                           [2, 3] : midMidLeft,
                           [2, 4] : midBottomLeft,
                           [2, 5] : outBottomMiddle,
                           [3, 1] : outTopMiddle,
                           [3, 2] : midTopMiddle,
                           [3, 3] : center,
                           [3, 4] : midBottomMiddle,
                           [3, 5] : outBottomMiddle,
        
      }

      function addBoid(){
        var canvas = document.getElementById("canvas1");
        var ctx = canvas.getContext("2d");

        drawBoids(ctx, 10, 40, 200, 10, 10);
      }

      function drawBoids(ctx, count, x, y, radius, radiusGrowth){
        if(count > 1){
          drawBoid(ctx, x + radius + 10, y, radius);
          drawBoids(ctx, count - 1, x + (radius * 2) + 20, y, radius + radiusGrowth, radiusGrowth);
        }
      }

      function drawBoid(ctx, x, y, r){
        ctx.fillStyle = "#000000";
        ctx.beginPath();
        ctx.arc(x, y, r, 1.75 * Math.PI, 1.25 * Math.PI);
        ctx.lineTo(x - r * 0.7, y - (0.6 * r)),
        ctx.lineTo(x, y - (r * 1.8)),
        ctx.lineTo(x + r * 0.7, y - (0.6 * r)),
        ctx.fill();
      }
    </script>
  </head>
  <!--<body onload="(function() {alert('Hey!')}).call(null)">-->
  <body>
    Text
    <button id="addBoid" onclick="addBoid()">Add Boid</button>
    <br>
    <canvas id="canvas1" width="600" height="600"></canvas>
  </body>
</html>
